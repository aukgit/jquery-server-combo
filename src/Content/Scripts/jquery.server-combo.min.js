(function(n,t,i,r){"use strict";function s(n,t,i){n.hide();this.settings=i;this.$implementDiv=t;this.$element=n;this._name=c;this.init(n,t)}function a(n,t){for(var e,i,u=[],f=t,r=0;r<f.length;r++)if(e=f[r],i=n.find(e),i.length>0){var o=i.attr("name"),s=i.attr("value"),h={name:o,value:s};u.push(h)}return u}function h(n,t,i){var u=n.attr(t);return u!==r&&u!==null?u==="true"?!0:u==="false"?!1:u:i}function v(n,t){for(var i,u=[{setting:"crossDomain",attr:"data-cross-domain"},{setting:"placeHolder",attr:"data-placeholder"},{setting:"placeHolderValue",attr:"data-placeholder-value"},{setting:"placeHolderDisable",attr:"data-placeholder-disable"},{setting:"isDynamicLoad",attr:"data-dynamic-load"},{setting:"url",attr:"data-url"},{setting:"nextPageUrl",attr:"data-next-page-url"},{setting:"selfUI",attr:"data-original-self-ui"},{setting:"maxDisplayItems",attr:"data-max-search-item-display"},{setting:"isOdata",attr:"data-odata"},{setting:"isOdataPagefromServer",attr:"data-odata-is-paged-from-server"},{setting:"delay",attr:"data-is-keypress-delay"},{setting:"additionalCSS",attr:"data-additional-css"},{setting:"isLiveSearch",attr:"data-live-search"},{setting:"isDependableCombo",attr:"data-dependable"},{setting:"dependablePropertyName",attr:"data-dependable-prop-name"},{setting:"inputValidationRegularExpression",attr:"data-regularexpression-valid"},{setting:"valueSelect",attr:"data-selected-value"},{setting:"isMultipleSelect",attr:"data-is-multiple"},{setting:"isRequired",attr:"data-is-required"},{setting:"elementCreatingId",attr:"data-id"},{setting:"displayField",attr:"data-display-field"},{setting:"searchingField",attr:"data-searching-field"},{setting:"isDependableCombo",attr:"data-value-field"},{setting:"valueField",attr:"data-dependable"},{setting:"elementName",attr:"data-name"},{setting:"isPaginationEnable",attr:"data-pagination"},{setting:"totalItemsCountOnServer",attr:"data-total-items-count"},{setting:"currentPage",attr:"data-current-page"},{setting:"pageSize",attr:"data-page-size"},{setting:"isCustomHtml",attr:"data-custom-html-format"},{setting:"isOptimized",attr:"data-optimized"},{setting:"isTag",attr:"data-tag"}],r=0;r<u.length;r++)i=u[r],t[i.setting]=h(n,i.attr,t[i.setting]);return t.messages.requesting=h(n,"data-requesting-label",t.messages.requesting),t}if(typeof jQuery=="undefined")throw new Error("serverComboBox requires jQuery");if(typeof jQuery.validator=="undefined")throw new Error("serverComboBox requires jQuery validation plugin & jquery.validate.unobtrusive plugin.");var c="serverComboBox",l,u,f=!1,e,o={crossDomain:!0,multipleRequests:!0,checkValidationBeforeSendingRequest:!0,dontSendSameRequestTwice:!0,disableInputOnValidation:!0,focusPersistIfNotValid:!0,hideOnValidation:!1,placeHolder:"",placeHolderValue:"",placeHolderDisable:!1,isDynamicLoad:!0,isTag:!1,isLiveSearch:!1,isOdata:!1,isOdataPagefromServer:!0,isMultipleSelect:!0,isRequired:!0,oDataRelationsList:[],isPaginationEnable:!1,pageSize:30,totalItemsCountOnServer:0,currentPage:1,maxDisplayItems:10,displayField:"display",searchingField:"display",valueField:"id",valueSelect:"",selectsFistOneByDefault:!0,url:"",delay:250,nextPageUrl:"?Page=@pageNumber",selfUI:!1,isOptimized:!0,additionalCSS:"",singleItemClass:"",isDependableCombo:!0,dependablePropertyName:"",inputValidationRegularExpression:"",elementCreatingId:"",elementName:"",isCustomHtml:!0,searchType:{startsWith:!0,contains:!1,equal:!1,notEqual:!1,custom:""},messages:{requesting:"Requesting data..."},selectors:{label:".jq-server-combo-label",comboImplement:".jq-server-combo-implement",divContainer:".form-combo",additionalFields:["[name=__RequestVerificationToken]"]},attributes:{url:"data-url",isValidate:"data-is-validate",submitMethod:"data-submit-method",propertyFieldName:"data-name"},icons:{invalid:"validation-icon-invalid fa fa-times",valid:"validation-icon-valid fa fa-check",spinner:"validation-icon-spinner fa fa-refresh fa-spin-custom",error:"validation-icon-error fa fa-exclamation-circle"},cssClass:{input:"jq-input",inputHover:"jq-combo-hover",comboHidden:"jq-combo-hidden",combo:"jq-combo",comboOpen:"jq-combo-open",comboHover:"jq-combo-hover",styleSetName:"default",listItem:"jq-list-item"},iconsIdPrefixes:{invalid:"invalid-mark-",valid:"valid-mark-",spinner:"validation-spinner-",error:"validation-error-"},response:{message:"Field is valid.",isValid:!0,isError:!1,errorCode:null,errorMessage:null},events:{iconCreated:function(){},sameRequestTwice:function(){},beforeSendingRequest:function(){},responseReceived:function(){},responseProcessed:function(){},invalidBefore:function(){},invalidAfter:function(){},validBefore:function(){},validAfter:function(){},onError:function(){}}};n.extend(s.prototype,{isDebugging:!1,isEmpty:function(n){return n===null||n===r||n.length===0},init:function(n){this.isProcessingRequired()&&this.processDiv(n)},getSettings:function(){return this.settings},isProcessingRequired:function(){var n=this.getSettings();return n.isDynamicLoad},isMultipleRequestAllowed:function(){return this.getSettings().multipleRequests},isDisableInputOnValidation:function(){return this.getSettings().disableInputOnValidation},isInputValidationRequirestoSendRequest:function(){return this.getSettings().checkValidationBeforeSendingRequest},dontSendSameRequestTwice:function(){return this.getSettings().dontSendSameRequestTwice},getAttributes:function(){return this.getSettings().attributes},getEvents:function(){return this.getSettings().events},getIcons:function(){return this.getSettings().icons},getIdPrefixes:function(){return this.getSettings().iconsIdPrefixes},getSelectors:function(){return this.getSettings().selectors},getMessages:function(){return this.getSettings().messages},getInputOrCreate:function(){return this.isEmpty(this.$input),this.$input},getUrl:function(){var n=this.getAttributes(),t=this.getInputOrCreate();return t.attr(n.url)},processDiv:function(){var t=this.getUrl(),n=this.getSettings();n.selfUI},test:function(){this.showSpinner($input)},setCurrentTextForNexttimeChecking:function(n){n.attr("data-previous-submit",n.val())},isPreviousRequestIsSame:function(n,t,i){var u=t.attr("data-previous-submit"),r=u===t.val(),e=this.getSettings(),f=e.events;return this.isDebugging&&console.log("Request is same : "+r),r&&(this.isEmpty(f.sameRequestTwice)||f.sameRequestTwice(n,t,i,u)),r},createInput:function(){},inputProcessWithBlurEvent:function(){var n=this,t=this.getSettings()},blurEvent:function(){},focusIfnotValid:function(n,t){if(t===!0){n.focus();return}n.valid()===!1&&n.focus()},concatAdditionalFields:function(n){var t=e.slice(),i={name:n.attr("name"),value:n.val()};return t.push(i),t},getSubmitMethod:function(n){var t=this.getSettings().attributes;return n.attr(t.submitMethod)},abortPreviousAjaxRequest:function(n){this.showSpinner(n);this.hideInvalidIcon(n);this.hideErrorIcon(n);this.hideErrorIcon(n);this.hideValidIcon(n);this.isEmpty(this.ajaxRequest)||this.ajaxRequest.abort()},sendRequest:function(n,t,i,r){var e=this.getSubmitMethod(t),u=this,o=u.isDebugging,f=u.getSettings().events;this.isEmpty(f.beforeSendingRequest)||f.beforeSendingRequest(n,t,i,r);n.attr("data-icon-added","true");this.abortPreviousAjaxRequest(t);u.markAsProcessing(n,!0);u.setCurrentTextForNexttimeChecking(t);this.ajaxRequest=jQuery.ajax({method:e,url:i,data:r,crossDomain:!0,dataType:"JSON"}).done(function(i){o&&console.log(i);u.markAsProcessing(n,!1);u.processResponse(t,i);u.hideSpinner(t)}).fail(function(r,f,e){u.hideSpinner(t);u.errorProcess(n,t,r,f,e,i);console.log("Request failed: "+e+". Url : "+i)})},errorProcess:function(n,t,i,r,u,f){var e=i.status,o=this.getSettings(),s=o.events,h="";if(e===0&&(e=404,r="Requested url doesn't lead to a valid request."),h="Code "+e+" : "+r,this.showErrorIcon(t,h),o.focusPersistIfNotValid&&this.focusIfnotValid(t,!0),!this.isEmpty(s.onError))s.onError(n,t,i,r,u,f)},markAsProcessing:function(n,t){this.isDebugging&&console.log("Making: "+t);n.attr("data-is-processing",t)},isInProcessingMode:function(n){var t=n.attr("data-is-processing");return this.isDebugging&&console.log("is Processing: "+t),t==="true"},getInputNameOrId:function(n){var t=n.attr("id");return this.isEmpty(t)&&(t=n.attr("name")),t},setMessageOnIcons:function(n,t){var i=n.find("a").attr("title",t).attr("data-original-title",t).find("span");i.attr("title",t).attr("data-display",t)},createIcons:function(t,i,r,u){var h=this.getInputNameOrId(t),c=this.getValidator(),l=this.$element,a=this.getSettings(),o=a.events,s=this.getWrapperPrefix(),f=u+h,v="<div class='validation-icon-wrapper' id='"+s+f+"'><a data-toggle='tooltip' id='"+f+"'title='"+r+"' data-original-title='"+r+"' class='tooltip-show'><span data-display='"+r+"' class='"+i+"' title='"+r+"'><\/span><\/a><\/div>",e;return c.append(v),e=n.byId(s+f),n.byId(f).tooltip(),this.isEmpty(o.iconCreated)||o.iconCreated(l,t,e),e},getWrapperPrefix:function(){return"wrapper-"},getValidator:function(){if(this.isEmpty(this.$validator)){var n=this.getSelectors();this.$validator=this.$element.find(n.validator)}return this.$validator},getCachedIcon:function(n,t){var r=this.getIdPrefixes(),s=this.getWrapperPrefix()+t+this.getInputNameOrId(n),e="$"+s,u=this[e];if(this.isEmpty(u)){var h=this.getMessages(),o="",f=this.getIcons(),i="";t===r.spinner?(i=f.spinner,o=h.requesting):t===r.valid?i=f.valid:t===r.invalid?i=f.invalid:t===r.error&&(i=f.error);u=this.createIcons(n,i,o,t);this[e]=u}return u},getInvalidIcon:function(n){if(this.isEmpty(this.$invalidMarkIcon)){var t=this.getIdPrefixes();this.$invalidMarkIcon=this.getCachedIcon(n,t.invalid)}return this.$invalidMarkIcon},getValidIcon:function(n){if(this.isEmpty(this.$validMarkIcon)){var t=this.getIdPrefixes();this.$validMarkIcon=this.getCachedIcon(n,t.valid)}return this.$validMarkIcon},getSpinner:function(n){if(this.isEmpty(this.$spinner)){var t=this.getIdPrefixes();this.$spinner=this.getCachedIcon(n,t.spinner)}return this.$spinner},getErrorIcon:function(n){if(this.isEmpty(this.$errorIcon)){var t=this.getIdPrefixes();this.$errorIcon=this.getCachedIcon(n,t.error)}return this.$errorIcon},showErrorIcon:function(n,t){var i=this.getErrorIcon(n);this.setMessageOnIcons(i,t);this.animateOn(i)},showSpinner:function(n){var t=this.getSpinner(n);this.animateOn(t)},showInvalidIcon:function(n,t){var i=this.getInvalidIcon(n);this.setMessageOnIcons(i,t);this.animateOn(i)},showValidIcon:function(n,t){var i=this.getValidIcon(n);this.setMessageOnIcons(i,t);this.animateOn(i)},hideValidIcon:function(n){var t=this.getValidIcon(n);this.animateOff(t)},hideErrorIcon:function(n){var t=this.getErrorIcon(n);this.animateOff(t)},hideInvalidIcon:function(n){var t=this.getInvalidIcon(n);this.animateOff(t)},hideSpinner:function(n){var t=this.getSpinner(n);this.animateOff(t)},animateOn:function(n){n.fadeIn("slow")},animateOff:function(n){n.hide()},processResponse:function(t,i){var u=this,f=this.$element,e=this.getSettings(),r=e.events,o;this.isEmpty(r.responseReceived)||r.responseReceived(f,t,i);o=e.response;i=n.extend({},o,i);i.isValid?u.validResponse(t,i):u.inValidResponse(t,i);this.isEmpty(r.responseProcessed)||r.responseProcessed(f,t,i)},validResponse:function(n,t){var e=this.isDisableInputOnValidation(),r=this.getSettings().events,o=this.getSettings(),i=this.$element,u=!0,f=t.message;this.isEmpty(r.validBefore)||r.validBefore(i,n,t);this.showValidIcon(n,t.message);e&&n.attr("disabled","disabled");i.attr("data-server-validated",u).attr("data-message",f);n.attr("data-server-validated",u).attr("data-message",f);o.hideOnValidation&&(i.attr("data-is-hidden",u),i.hide("slow"));this.isEmpty(r.validAfter)||r.validAfter(i,n,t)},inValidResponse:function(n,t){var u=this.getSettings(),i=u.events,r=this.$element,f=!1,e=t.message;this.isEmpty(i.invalidBefore)||i.invalidBefore(r,n,t);this.showInvalidIcon(n,t.errorCode+" : "+t.errorMessage);r.attr("data-server-validated",f).attr("data-message",e);n.attr("data-server-validated",f).attr("data-message",e);u.focusPersistIfNotValid&&this.focusIfnotValid(n,!0);this.isEmpty(i.invalidAfter)||i.invalidAfter(r,n,t)}});n.fn.serverComboBox=function(t){var y=this,b=n.extend({},o,t),r=b.selectors,k=r.additionalFields,h,i;for(l=this,f!==!0&&(u=y.find(r.divContainer),e=a(y,k),f=!0),h=u,i=0;i<h.length;i++){var c=n(h[i]),d=n.extend({},o,t),p=c.find(r.comboImplement),w=v(p,d);console.log(w);console.log(c);new s(c,p,w)}}})(jQuery,window,document);
//# sourceMappingURL=jquery.server-combo.min.js.map
