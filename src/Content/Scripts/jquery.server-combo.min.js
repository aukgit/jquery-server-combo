(function(n,t,i,r){"use strict";function u(n,t,i){this.settings=i;this.$implementDiv=t;this.$element=n;this._name=c;this.init(n,t)}function a(n,t){for(var e,i,u=[],f=t,r=0;r<f.length;r++)if(e=f[r],i=n.find(e),i.length>0){var o=i.attr("name"),s=i.attr("value"),h={name:o,value:s};u.push(h)}return u}function h(n,t,i){var u=n.attr(t);return u!==r&&u!==null?u==="true"?!0:u==="false"?!1:u:i}function v(n,t){for(var i,u=[{setting:"crossDomain",attr:"data-cross-domain"},{setting:"placeHolder",attr:"data-placeholder"},{setting:"placeHolderValue",attr:"data-placeholder-value"},{setting:"placeHolderDisable",attr:"data-placeholder-disable"},{setting:"isDynamicLoad",attr:"data-dynamic-load"},{setting:"url",attr:"data-url"},{setting:"nextPageUrl",attr:"data-next-page-url"},{setting:"selfUI",attr:"data-original-self-ui"},{setting:"maxDisplayItems",attr:"data-max-search-item-display"},{setting:"isOdata",attr:"data-odata"},{setting:"isOdataPagefromServer",attr:"data-odata-is-paged-from-server"},{setting:"delay",attr:"data-is-keypress-delay"},{setting:"additionalCSS",attr:"data-additional-css"},{setting:"isLiveSearch",attr:"data-live-search"},{setting:"isDependableCombo",attr:"data-dependable"},{setting:"dependablePropertyName",attr:"data-dependable-prop-name"},{setting:"inputValidationRegularExpression",attr:"data-regularexpression-valid"},{setting:"valueSelected",attr:"data-selected-value"},{setting:"isMultipleSelect",attr:"data-is-multiple"},{setting:"isRequired",attr:"data-is-required"},{setting:"elementCreatingId",attr:"data-id"},{setting:"displayField",attr:"data-display-field"},{setting:"searchingField",attr:"data-searching-field"},{setting:"valueField",attr:"data-value-field"},{setting:"isDependableCombo",attr:"data-dependable"},{setting:"elementName",attr:"data-name"},{setting:"isPaginationEnable",attr:"data-pagination"},{setting:"totalItemsCountOnServer",attr:"data-total-items-count"},{setting:"currentPage",attr:"data-current-page"},{setting:"pageSize",attr:"data-page-size"},{setting:"isCustomHtml",attr:"data-custom-html-format"},{setting:"isOptimized",attr:"data-optimized"},{setting:"isTag",attr:"data-tag"},{setting:"isSelectFirstIndexByDefault",attr:"data-is-select-first-item"},{setting:"isTag",attr:"data-tag"},{setting:"submitMethod",attr:"data-submit-method"}],r=0;r<u.length;r++)i=u[r],t[i.setting]=h(n,i.attr,t[i.setting]);return t.messages.requesting=h(n,"data-requesting-label",t.messages.requesting),t}if(typeof jQuery=="undefined")throw new Error("serverComboBox requires jQuery");if(typeof jQuery.validator=="undefined")throw new Error("serverComboBox requires jQuery validation plugin & jquery.validate.unobtrusive plugin.");var c="serverComboBox",l,f,e=!1,o,s={crossDomain:!0,multipleRequests:!0,checkValidationBeforeSendingRequest:!0,dontSendSameRequestTwice:!0,disableInputOnValidation:!0,focusPersistIfNotValid:!0,hideOnValidation:!1,placeHolder:"",placeHolderValue:"",placeHolderDisable:!1,isDynamicLoad:!0,isTag:!1,isLiveSearch:!1,isOdata:!1,isOdataPagefromServer:!0,isMultipleSelect:!0,isSelectFirstIndexByDefault:!0,submitMethod:"Get",isRequired:!0,oDataRelationsList:[],isPaginationEnable:!1,pageSize:30,totalItemsCountOnServer:0,currentPage:1,maxDisplayItems:10,displayField:"display",searchingField:"display",valueField:"id",valueSelected:"",selectsFistOneByDefault:!0,url:"",searchingUrl:"?search=@searchingKeyword",searchingVariable:"@searchingKeyword",delay:250,nextPageUrl:"?Page=@pageNumber",pagingVariableName:"@pageNumber",selfUI:!1,isOptimized:!0,additionalCSS:"",singleItemClass:"",isDependableCombo:!0,dependablePropertyName:"",inputValidationRegularExpression:"",elementCreatingId:"",elementName:"",isCustomHtml:!0,searchType:{startsWith:!0,contains:!1,equal:!1,notEqual:!1,custom:""},messages:{requesting:"Requesting data..."},selectors:{label:".jq-server-combo-label",comboImplement:".jq-server-combo-implement",divContainer:".form-combo",additionalFields:["[name=__RequestVerificationToken]"]},attributes:{url:"data-url",isValidate:"data-is-validate",submitMethod:"data-submit-method",propertyFieldName:"data-name"},icons:{invalid:"validation-icon-invalid fa fa-times",valid:"validation-icon-valid fa fa-check",spinner:"validation-icon-spinner fa fa-refresh fa-spin-custom",error:"validation-icon-error fa fa-exclamation-circle"},cssClass:{input:"jq-combo-input form-control",inputHover:"jq-combo-hover",comboHidden:"jq-combo-hidden",combo:"jq-combo",comboClick:"jq-combo-click",comboOpen:"jq-combo-open",comboHover:"jq-combo-hover-over",styleSetName:"default-style",listItem:"jq-combo-list-item",requestSending:"jq-combo-requesting-to-server",wrapper1:"first-wrapper-container",wrapper2:"second-wrapper-container",wrapper3:"third-wrapper-container",wrapper4:"forth-wrapper-container"},iconsIdPrefixes:{invalid:"invalid-mark-",valid:"valid-mark-",spinner:"validation-spinner-",error:"validation-error-",input:"jq-input-",wrapper1:"first-wrapper-",wrapper2:"second-wrapper-",wrapper3:"third-wrapper-",wrapper4:"forth-wrapper-"},response:{message:"Field is valid.",isValid:!0,isError:!1,errorCode:null,errorMessage:null},events:{iconCreated:function(){},inputCreated:function(){},sameRequestTwice:function(){},beforeSendingRequest:function(){},responseReceived:function(){},responseProcessed:function(){},invalidBefore:function(){},invalidAfter:function(){},validBefore:function(){},validAfter:function(){},onError:function(){}}};n.extend(u.prototype,{data:null,currentPageData:null,selectedData:null,$input:null,isDebugging:!0,isEmpty:function(n){return n===null||n===r||n.length===0},init:function(n,t){var i,r,u,f;this.isProcessingRequired()&&(i=this.getCssClasses(),r=this.render,this.setPluginSubItems(),this.processDiv(n,t),this.classAddRemove(n,i.styleSetName),this.classAddRemove(t,i.styleSetName),this.classAddRemove(n,"jq-server-combo"),this.classAddRemove(t,"jq-server-combo-implement"),this.classAddRemove(t,"implement"),n.attr("data-style",i.styleSetName),r.input(this,n,t),u=r.$inputWrapper,f=r.$input,this.setTriggerableEvents(n,t,u,f),this.setDefaultInvalidSettings(),this.test())},setDefaultInvalidSettings:function(){var n=this.getSettings();isNaN(n.currentPage)&&(n.currentPage=1)},setPluginSubItems:function(){this.retrieveData.plguin=this;this.ajax.plguin=this;this.render.plguin=this;this.triggerableEvents.plguin=this;this.pagination.plguin=this},getSettings:function(){return this.settings},isProcessingRequired:function(){var n=this.getSettings();return n.isDynamicLoad},isMultipleRequestAllowed:function(){return this.getSettings().multipleRequests},isDisableInputOnValidation:function(){return this.getSettings().disableInputOnValidation},isInputValidationRequirestoSendRequest:function(){return this.getSettings().checkValidationBeforeSendingRequest},dontSendSameRequestTwice:function(){return this.getSettings().dontSendSameRequestTwice},getAttributes:function(){return this.getSettings().attributes},getID:function(){return this.getSettings().elementCreatingId},getName:function(){return this.getSettings().elementName},getValue:function(){return this.getSettings().valueSelected},setValue:function(n){this.settings.valueSelected=n},getEvents:function(){return this.getSettings().events},getIcons:function(){return this.getSettings().icons},getIdPrefixes:function(){return this.getSettings().iconsIdPrefixes},getSelectors:function(){return this.getSettings().selectors},getCssClasses:function(){return this.getSettings().cssClass},getMessages:function(){return this.getSettings().messages},getInputOrCreate:function(){return this.isEmpty(this.$input),this.$input},processDiv:function(){settings.selfUI===!1},test:function(){this.pagination.getUrl()},setCurrentTextForNexttimeChecking:function(n){n.attr("data-previous-submit",n.val())},isPreviousRequestIsSame:function(n,t,i){var u=t.attr("data-previous-submit"),r=u===t.val(),e=this.getSettings(),f=e.events;return this.isDebugging&&console.log("Request is same : "+r),r&&(this.isEmpty(f.sameRequestTwice)||f.sameRequestTwice(n,t,i,u)),r},createInput:function(){},inputProcessWithBlurEvent:function(){var n=this,t=this.getSettings()},blurEvent:function(){},concatAdditionalFields:function(n){var t=o.slice(),i={name:n.attr("name"),value:n.val()};return t.push(i),t},getSubmitMethod:function(){return this.getSettings().submitMethod},markAsProcessing:function(n,t){this.isDebugging&&console.log("Making: "+t);n.attr("data-is-processing",t)},isInProcessingMode:function(n){var t=n.attr("data-is-processing");return this.isDebugging&&console.log("is Processing: "+t),t==="true"},animateOn:function(n){n.fadeIn("slow")},animateOff:function(n){n.hide()},classAddRemove:function(n,t,i){this.isEmpty(t)||n.addClass(t);this.isEmpty(i)||n.removeClass(i)},setTriggerableEvents:function(n,t,i,r){var u=this.triggerableEvents,f=this,e=this.render,o=e.$caretWrapper;t.hover(function(){u.implementHoverIn(f,n,t,i,r)},function(){u.implementHoverOut(f,n,t,i,r)});o.hover(function(){u.caretHoverIn(f,n,t,i,r,o,e)},function(){u.caretHoverOut(f,n,t,i,r,o,e)}).click(function(){u.caretClick(f,n,t,i,r,o,e)})},triggerableEvents:{plugin:null,divHoverIn:function(){},divHoverOut:function(){},implementHoverIn:function(n,t){var i=n.getCssClasses();n.classAddRemove(t,i.comboHover)},implementHoverOut:function(n,t){var i=n.getCssClasses();n.classAddRemove(t,null,i.comboHover)},caretClick:function(n,t,i,r,u,f){var e=n.getCssClasses();n.classAddRemove(f,null,e.comboHover)},caretHoverIn:function(n,t,i,r,u,f){var e=n.getCssClasses();n.classAddRemove(f,e.comboHover)},caretHoverOut:function(n,t,i,r,u,f){var e=n.getCssClasses();n.classAddRemove(f,null,e.comboHover)}},render:{plugin:null,$inputWrapper:null,$input:null,$caretWrapper:null,inputWrapper:function(t,i,r,u,f,e){var o="$inputWrapper";if(t.isEmpty(this[o])){var v=u.wrapper1+f,s=u.wrapper2+f,y="dropdown-icon-"+f,h="dropdown-wrapper-icon-"+f,c=n("<div><\/div>",{id:v,"class":e.wrapper1}),l=n("<div><\/div>",{id:s,"class":e.wrapper2}),a=n("<span><\/span>",{id:h,"class":"dropdown-wrapper-icon"}),p=n("<i><\/i>",{id:y,"class":"dropdown-icon fa fa-caret-down"});p.appendTo(a);a.appendTo(l);l.appendTo(c);c.appendTo(r);this.$caretWrapper=n.byId(h);this[o]=n.byId(s)}return this[o]},input:function(t,i,r){var e=t.getCssClasses(),f=t.getSettings(),o=t.getIdPrefixes(),s=t.getID(),h=o.input+s,p=t.getEvents(),u="$input",v,y;if(t.isEmpty(this[u])){var c="",l="",a=!1;f.placeHolderDisable===!1&&(c=f.placeHolder,l=f.placeHolderValue,a=!0);v=n("<input/>",{id:h,"class":e.input,type:"text",placeholder:c,"data-placeholder-val":l,"data-is-placeholder":a});y=this.inputWrapper(t,i,r,o,s,e);v.prependTo(y);this[u]=n.byId(h);t.isDebugging&&console.log(this.$input);p.inputCreated(t,i,r,this[u]);t[u]=this[u]}return this[u]}},ajax:{plguin:null,ajaxRequest:null,abortPrevious:function(){this.plguin.isEmpty(this.ajaxRequest)||this.ajaxRequest.abort()},addClassWhileSending:function(){var n=this.plguin,i=n.$implementDiv,r=n.$element,u=n.getSettings(),t=u.cssClass;n.classAddRemove(r,t.requestSending);n.classAddRemove(i,t.requestSending)},removeClassAfterSendingRequest:function(){var n=this.plguin,i=n.$implementDiv,r=n.$element,u=n.getSettings(),t=u.cssClass;n.classAddRemove(r,null,t.requestSending);n.classAddRemove(i,null,t.requestSending)},beforeSend:function(){},sendRequest:function(n,t,i,r){var u=this.plguin,f=u.getSubmitMethod(),o=u.isDebugging,e=u.getSettings().events;!this.isEmpty(e.beforeSendingRequest);this.abortPrevious();this.addClassWhileSending();u.markAsProcessing(n,!0);this.ajaxRequest=jQuery.ajax({method:f,url:i,data:r,crossDomain:!0,dataType:"JSON"});this.ajaxRequest.done(this.dataReceived);this.ajaxRequest.fail(function(t,r,u){this.removeClassAfterSendingRequest();self.errorProcess(n,$input,t,r,u,i);console.log("Request failed: "+u+". Url : "+i)})},dataReceived:function(n){var t=this.plguin,r=t.getSubmitMethod(),i=t.isDebugging,u=t.getSettings().events;this.removeClassAfterSendingRequest();i&&console.log(n)},errorProcess:function(n,t,i,r,u,f){var e=i.status,o=this.getSettings(),s=o.events,h="";if(e===0&&(e=404,r="Requested url doesn't lead to a valid request."),h="Code "+e+" : "+r,this.showErrorIcon(t,h),o.focusPersistIfNotValid&&this.focusIfnotValid(t,!0),!this.isEmpty(s.onError))s.onError(n,t,i,r,u,f)}},pagination:{setPage:function(){},getUrlRegularPaged:function(n,t){var r=t.currentPage,u=t.nextPageUrl,f=t.pagingVariableName,i=u.replace(f,r);return n.isDebugging&&(console.log("Paged url:"),console.log(i)),i},getUrlODataPaged:function(n,t){var e=t.currentPage,r=[],o="$top="+t.pageSize,u=(e-1)*t.pageSize,s="$skip="+u,h="$select="+t.displayField+","+t.valueField+","+t.searchingField,f,i;return r.push(o),u>0&&r.push(s),r.push("$inlinecount=allpages"),t.isOptimized&&r.push(h),f=r.join("&"),i=t.url,i[i.length-1]!=="?"&&(i+="?"),i+=f,n.isDebugging&&(console.log("Paged url:"),console.log(i)),i},getUrl:function(){var t=this.plguin,n=t.getSettings(),i=!n.isPaginationEnable&&!n.isOdata,r=n.isPaginationEnable&&!n.isOdata,u=!n.isPaginationEnable&&n.isOdata&&!n.isOdataPagefromServer,f=n.isPaginationEnable&&n.isOdata&&!n.isOdataPagefromServer,e=n.isPaginationEnable&&n.isOdata&&n.isOdataPagefromServer;return i||u?n.url:r?this.getUrlRegularPaged(t,n):f||e?this.getUrlODataPaged(t,n):null}},retrieveData:{plguin:null,getRegularData:function(){var n=this.plguin,t=u.ajax},get:function(){var n=this.plguin}}});n.fn.serverComboBox=function(t){var c=this,w=n.extend({},s,t),r=w.selectors,b=r.additionalFields,h,i;for(l=this,e!==!0&&(f=c.find(r.divContainer),o=a(c,b),e=!0),h=f,i=0;i<h.length;i++){var y=n(h[i]),k=n.extend({},s,t),p=y.find(r.comboImplement),d=v(p,k);new u(y,p,d)}}})(jQuery,window,document);
//# sourceMappingURL=jquery.server-combo.min.js.map
